<UserControl x:Class="Echo.Views.PythonEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:avalon="http://icsharpcode.net/sharpdevelop/avalonedit"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Echo.Views"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             d:DesignHeight="450"
             d:DesignWidth="800"
             mc:Ignorable="d">
    <UserControl.InputBindings>
        <KeyBinding Command="{Binding SaveCommand}" Gesture="Ctrl+S" />
    </UserControl.InputBindings>

    <DockPanel>
        <!--  Toolbar  -->
        <ToolBar Background="Transparent" DockPanel.Dock="Top">
            <Button Command="{Binding OpenFolderCommand}" Content="Open Folder" />
            <Button Command="{Binding NewDocumentCommand}" Content="New" />
            <Button Command="{Binding SaveCommand}" Content="Save" />
            <Button Command="{Binding SaveAllCommand}" Content="Save All" />
            <Button Command="{Binding ExecuteCommand}" Content="Execute" />
            <Separator />
            <TextBox Width="250"
                     VerticalAlignment="Center"
                     Text="{Binding CurrentFolder, Mode=TwoWay}" />
        </ToolBar>

        <!--  Tabbed headers only  -->
        <TabControl HorizontalContentAlignment="Left"
                    VerticalContentAlignment="Center"
                    DockPanel.Dock="Top"
                    ItemsSource="{Binding Documents}"
                    SelectedItem="{Binding SelectedDocument}">
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Margin="0"
                                   VerticalAlignment="Center"
                                   Text="{Binding Name}" />
                        <Button Width="18"
                                Height="18"
                                Margin="2,0,0,0"
                                Padding="0"
                                Command="{Binding CloseDocumentCommand, RelativeSource={RelativeSource AncestorType=TabControl}}"
                                Content="x" />
                    </StackPanel>
                </DataTemplate>
            </TabControl.ItemTemplate>
        </TabControl>

        <Grid>
            <avalon:TextEditor x:Name="Editor"
                               FontFamily="Consolas"
                               FontSize="14"
                               ShowLineNumbers="True"
                               SyntaxHighlighting="Python"
                               VerticalScrollBarVisibility="Auto" />
        </Grid>
    </DockPanel>
</UserControl>
